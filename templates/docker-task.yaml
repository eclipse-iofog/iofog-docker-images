parameters:
  platform: ''
  target: ''
  version: ''
  command: 'buildAndPush'

steps:
  - task: Docker@2
    displayName: '${{ parameters.version }} ${{ parameters.target }} ${{ parameters.version }} for ${{ parameters.platform }}'
    inputs:
      containerRegistry: 'Edgeworx GCP'
      repository: '$(repository)/${{ parameters.target }}-${{ parameters.platform }}'
      command: ${{ parameters.command }}
      Dockerfile: '${{ parameters.target }}-${{ parameters.version }}/Dockerfile.${{ parameters.platform }}'
      buildContext: '.'
      tags: |
        ${{ parameters.version }}
